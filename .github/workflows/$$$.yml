name: Descargar Modelos Applio
on: 
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Crear estructura de carpetas
        run: |
          mkdir -p Applio_Models/assets/pretrained_v2
          mkdir -p Applio_Models/assets/weights

      - name: Descargar Modelos Base (Mirror Estable)
        run: |
          cd Applio_Models/assets/pretrained_v2
          # Descarga desde un repositorio alternativo estable de RVC/Applio
          wget -L -q https://huggingface.co/lj1995/VoiceConversionWebUI/resolve/main/hubert_base.pt -O hubert_base.pt
          wget -L -q https://huggingface.co/lj1995/VoiceConversionWebUI/resolve/main/rmvpe.pt -O rmvpe.pt
          wget -L -q https://huggingface.co/IAHispano/Applio/resolve/36b9e07/assets/pretrained_v2/f0D40k.pth -O f0D40k.pth
          wget -L -q https://huggingface.co/IAHispano/Applio/resolve/36b9e07/assets/pretrained_v2/f0G40k.pth -O f0G40k.pth

      - name: Descargar Voz de Narrador (Gu√≠a de Museo)
        run: |
          cd Applio_Models/assets/weights
          # Descargamos un modelo .pth de narrador profesional
          wget -L -q https://huggingface.co/IAHispano/Applio/resolve/main/assets/weights/v2/spanish_alvaro.pth -O guia_museo.pth

      - name: Verificar archivos
        run: |
          echo "Contenido de pretrained_v2:"
          ls -lh Applio_Models/assets/pretrained_v2
          echo "Contenido de weights:"
          ls -lh Applio_Models/assets/weights

      - name: Comprimir todo en un ZIP
        run: |
          zip -r modelos_applio_guia.zip Applio_Models

      - name: Subir Artifact
        uses: actions/upload-artifact@v4
        with:
          name: Pack-Modelos-Applio-Voz
          path: modelos_applio_guia.zip
          retention-days: 1
          
